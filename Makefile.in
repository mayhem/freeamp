# Freeamp master Makefile
# $Id: Makefile.in,v 1.24.4.2 1999/05/17 23:58:42 dogcow Exp $

FPIC=
# RELOC = null for freeamp main; RELOC = @FPIC@ for plugins.

include config/Makefile.header

FREEAMPOBJ =  base/src/hashtable.o base/src/log.o base/src/player.o
FREEAMPOBJ += base/src/playlist.o base/src/propimpl.o base/src/registrar.o
FREEAMPOBJ += base/src/registry.o base/src/thread.o io/src/eventbuffer.o
FREEAMPOBJ += base/src/prefixprefs.o base/src/preferences.o
FREEAMPOBJ += io/src/pmiregistry.o io/src/pmoregistry.o
FREEAMPOBJ += io/src/pullbuffer.o io/src/streambuffer.o
FREEAMPOBJ += lmc/src/lmcregistry.o ui/src/uiregistry.o
FREEAMPOBJ += $(OSDEPOBJ)

all: freeamp plugins

freeamp: $(FREEAMPOBJ) $(freeamp_DEPENDENCIES)
	@rm -f freeamp
	$(CXXLINK) $(FREEAMPOBJ) $(LDFLAGS) -ldl -lpthread $(X_LIBS) $(X_EXTRA_LIBS)

clean: freeamp-clean plugins-clean

clean-freeamp freeamp-clean:
	-rm -f $(FREEAMPOBJ) freeamp

plugins: plugins-cc

plugins-cc install-plugins clean-plugins plugins-install plugins-clean:
	+$(PIMAKE) $@

distclean: clean
	-rm -f config.status Makefile config.cache

install: install-freeamp install-plugins

install-freeamp: freeamp
	$(mkinstalldirs) $(DESTDIR)$(bindir)
	$(INSTALL_PROGRAM) freeamp $(DESTDIR)$(bindir)

